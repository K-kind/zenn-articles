---
title: "supbase-jsã§Authã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã™ãã«åˆ‡ã‚Œã‚‹å•é¡Œã®å¯¾å‡¦"
emoji: "ğŸ·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["supabase", "javascript"]
published: true
---
# ç™ºç”Ÿã—ãŸå•é¡Œ

å‰æç’°å¢ƒ: @supabase/supabase-jsã®v1ç³»ï¼ˆ1.33.3ã§ç¢ºèªï¼‰

supabase-jsã¯ã€Authã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1æ™‚é–“ï¼‰ãŒåˆ‡ã‚Œã¦ã‚‚ã€è‡ªå‹•ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦ãã‚Œã‚‹ã€‚

ã—ã‹ã—ã€v1ç³»ã§ã¯ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å–å¾— `supabase.auth.session()` ãŒåŒæœŸçš„ã§ã‚ã‚Šã€ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‚’å¾…ãŸãªã„ã€‚

ãã®ãŸã‚ã€`supabase.auth.session()` ã®æˆ»ã‚Šå€¤ãŒnullã‹ã©ã†ã‹ã§ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’åˆ¤å®šã—ã¦ã„ã‚‹å ´åˆã€ãƒšãƒ¼ã‚¸é·ç§»å¾Œåˆå›ã«ã¯ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãŒé–“ã«åˆã‚ã™ãƒ­ã‚°ã‚¢ã‚¦ãƒˆçŠ¶æ…‹ã¨ãªã‚Šã€ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãŒæˆ»ã‚‹ã¨ã„ã†ãŠã‹ã—ãªæŒ™å‹•ã«ãªã‚Šå¾—ã‚‹ã€‚

é–¢é€£Issue: https://github.com/supabase/supabase/discussions/5272

# è§£æ±ºç­–

@supabase/supabase-jsã®v2ã‹ã‚‰ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å–å¾—æ–¹æ³•ãŒå¤‰ã‚ã‚Šã€ãƒˆãƒ¼ã‚¯ãƒ³ã®æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã‚‹å ´åˆã¯ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‚’å¾…ã£ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€v2ã«ä¸Šã’ã‚‹ã“ã¨ã§è§£æ±ºã™ã‚‹ã€‚

```js
// Before
const session = supabase.auth.session()

// After
const { data: { session } } = await supabase.auth.getSession()
```

ï¼ˆéåŒæœŸå‡¦ç†ã«å¤‰ã‚ã£ãŸãŸã‚ã€æ©Ÿæ¢°çš„ã«ã¯ç½®ãæ›ãˆã‚‰ã‚Œãªã„ãŒï¼‰

https://supabase.com/docs/reference/javascript/upgrade-guide

# ä½™è«‡

å½“åˆãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãŒã•ã‚Œãªã„ï¼ˆã‚ˆã†ã«è¦‹ãˆãŸï¼‰ã®ã¯ã€ `createClient` æ™‚ã® `autoRefreshToken` ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã‹ã¨æ€ã£ãŸãŒã€ã“ã‚Œã¯æœ€åˆã‹ã‚‰trueã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€ç„¡é–¢ä¿‚ã ã£ãŸã€‚

https://supabase.com/docs/reference/javascript/v1/initializing
